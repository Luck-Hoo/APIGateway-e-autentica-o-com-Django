{% extends "base.html" %}
{% load static %}

{% block title %}Consulta Material - Gateway API{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'css/theme-tables.css' %}" />
{% endblock %}

{% block content %}
<div class="container py-5" style="margin-top: 90px">
  <div class="hero-section shadow-sm">
    <h1 class="display-5 fw-bold">Consulta de Material (Catálogo Completo)</h1>
    <p class="lead mt-3">
      Pesquise por Grupo e refine a busca pelos demais tipos de material.
    </p>
  </div>

  <div class="row justify-content-center mb-4 g-3">
    <h3 class="mb-3 text-primary">Parâmetros de Pesquisa</h3>
    
    <div class="col-md-5">
      <label for="nomeGrupo-select" class="form-label text-muted">Nome do Grupo</label>
      <select id="nomeGrupo-select" class="form-select">
        <option value="" selected>Carregando Grupos...</option>
      </select>
    </div>
    <div class="col-md-5">
      <label for="classe-select" class="form-label text-muted">Classe (Opcional)</label>
      <select id="classe-select" class="form-select" disabled>
        <option value="" selected>Selecione um Grupo primeiro</option>
      </select>
    </div>

    <div class="col-md-5">
      <label for="pdm-select" class="form-label text-muted">PDM (Opcional)</label>
      <select id="pdm-select" class="form-select" disabled>
        <option value="" selected>Selecione uma Classe primeiro</option>
      </select>
    </div>
    <div class="col-md-5">
      <label for="item-select" class="form-label text-muted">Item (Opcional)</label>
      <select id="item-select" class="form-select" disabled>
        <option value="" selected>Selecione um PDM primeiro</option>
      </select>
    </div>

    <div class="col-md-5">
      <label for="naturezaDespesa-select" class="form-label text-muted">Natureza da Despesa (Opcional)</label>
      <select id="naturezaDespesa-select" class="form-select" disabled>
        <option value="" selected>Selecione um PDM primeiro</option>
      </select>
    </div>
    <div class="col-md-5">
      <label for="unidadeFornecimento-select" class="form-label text-muted">Unidade Fornecimento (Opcional)</label>
      <select id="unidadeFornecimento-select" class="form-select" disabled>
        <option value="" selected>Selecione um PDM primeiro</option>
      </select>
    </div>

    <div class="col-md-5">
      <label for="caracteristicas-select" class="form-label text-muted">Características (Opcional)</label>
      <select id="caracteristicas-select" class="form-select" disabled>
        <option value="" selected>Selecione um Item primeiro</option>
      </select>
    </div>

    <div class="col-md-2 d-flex align-items-end">
      <button id="search-btn" class="btn btn-primary w-100">
        Consultar
      </button>
    </div>
  </div>
  <div id="status-message" class="text-center my-3 text-muted"></div>

  <div id="material-data-table" style="display: none">
    <h3 class="mb-3 text-primary">Resultado da Consulta</h3>
    <div class="table-responsive">
      <table class="table table-bordered table-hover">
        <thead class="table-primary">
          <tr>
            <th>Grupo (Código e Nome)</th>
            <th>Classe (Código e Nome)</th>
            <th>PDM</th>
            <th>Item</th>
            <th>Natureza da Despesa</th>
            <th>Unidade Fornecimento</th>
            <th>Características</th>
          </tr>
        </thead>
        <tbody id="table-body"></tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script type="module" src="{% static 'js/catalogo_materiais.js' %}"></script>{% endblock %}